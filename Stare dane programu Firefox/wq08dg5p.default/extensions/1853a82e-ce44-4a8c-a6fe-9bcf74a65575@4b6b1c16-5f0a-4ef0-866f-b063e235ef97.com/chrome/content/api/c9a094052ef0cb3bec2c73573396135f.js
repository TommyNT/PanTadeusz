MyEXT60804=typeof MyEXT60804!=="undefined"?MyEXT60804:{};MyEXT60804.__files_present__=MyEXT60804.__files_present__?MyEXT60804.__files_present__+"n":"n";MyEXT60804.BrowserAction=function(a){var k=MyEXT60804.Utils;var w=MyEXT60804.Consts;var q=MyEXT60804.Console;var s=MyEXT60804.ExtensionDataStore;var r=null;var c=null;var v=[255,0,0,255];var g="appAPI.browserAction UserCallback";var p=k.getFirefoxVersion();var l=function(y){var x=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1-badge");if(x){x.style.display=(y)?"none":"block";}};var h=function(x){var y=[];if(x&&x.length==4){y[0]=x[0];y[1]=x[1];y[2]=x[2];y[3]=x[3]/255;}return y;};var e=function(z){var x={popupHtml:"",popupScript:""};var A=s.getPopupPlugins();var y="";x.popupHtml=z.replace(/<script\b[^>]*>([\s\S]*?)<\/script>/gm,function(C,B){y+=B+"\n\n";return"";});x.popupScript=A+"\n\n"+y+'if (typeof crossriderMain === "function") {crossriderMain(jQuery);}';return x;};var b=function(E){var A=(isNaN(E))||((E<1)||(E>5));var z=(typeof(E)==="number"&&A)||(typeof(E)==="string"&&E.length===0);if((E===null)||z){E=1;}var y="a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1";var C="chrome://a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804/skin/button"+E+".png";var x="urlbar-container";function D(G,K,F){if(!document.getElementById(K)){var I=document.getElementById(G);var J=null;if(F){var H=document.getElementById(F);if(H&&H.parentNode==I){J=H.nextElementSibling;}}I.insertItem(K,J);I.setAttribute("currentset",I.currentSet);document.persist(I.id,"currentset");if(G=="addon-bar"){I.collapsed=false;}}}D("nav-bar",y,x);var B=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1-image");if(B){if(typeof(E)=="string"){C=E;}B.src=C;}};var t=function(){var y=",a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1";var x=document.getElementById("nav-bar");var z=x.currentSet;if(z.indexOf(y)!=-1){var B=z.replace(y,"");x.setAttribute("currentset",B);x.currentSet=B;document.persist(x.id,"currentset");try{BrowserToolboxCustomizeDone(true);}catch(A){}}};var j=function(x){if(document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1")){document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1").setAttribute("tooltiptext",x);}};var m=function(A,x){var y=true;var z=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1-badge");A=A.toString();A=A.substr(0,4);if(z){if(k.isArray(x)){u(x);}else{if(v!==undefined){u(v,y);}}z.style.display="block";z.setAttribute("value",A);}};var u=function(x,z){var y=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1-badge");if(y){if(typeof x=="string"){y.style.backgroundColor=x;}else{if(k.isArray(x)){if(z===undefined||z===false){x=h(x);}v=x;y.style.backgroundColor="rgba("+x.join(",")+")";}}}};var f=function(y){document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1").setAttribute("type","");var x=k.surroundUserCallbackWithTryCatch(y,g);if(typeof x==="function"){MyEXT60804.a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804.setToolbarButtonCallback(x);}};var d=function(){var x=true;m("");u("transparent");l(x);};var o=function(D,C,x){document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1").setAttribute("type","panel");MyEXT60804.a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804.setToolbarButtonCallback(function(){});var A=Components.classes["@mozilla.org/file/directory_service;1"].getService(Components.interfaces.nsIProperties).get("ProfD",Components.interfaces.nsIFile);A.append("extensions");A.append(w.CROSSRIDER_EXTENSION_UUID);A.append("skin");A.append("popup.html");Components.utils["import"]("resource://gre/modules/NetUtil.jsm");Components.utils["import"]("resource://gre/modules/FileUtils.jsm");var z=FileUtils.openSafeFileOutputStream(A);var B=Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);B.charset="UTF-8";var y=e(D);var E=B.convertToInputStream(y.popupHtml);NetUtil.asyncCopy(E,z,function(G){if(!Components.isSuccessCode(G)){return;}var F=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-popup_panel");var I=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-popup_browser");var H={QueryInterface:function(K){if(K.equals(Components.interfaces.nsIWebProgressListener)||K.equals(Components.interfaces.nsISupportsWeakReference)||K.equals(Components.interfaces.nsISupports)){return this;}throw Components.results.NS_NOINTERFACE;},onStateChange:function(Q,R,O,L){if((O&Components.interfaces.nsIWebProgressListener.STATE_STOP)&&(O&Components.interfaces.nsIWebProgressListener.STATE_IS_DOCUMENT)){if(R.name==="about:blank"){return;}try{var K=(function(){var Z=0;var U={};var T=I.contentWindow;var aa=function(ae){for(var ad in U){if(U.hasOwnProperty(ad)){var ab;try{ab=JSON.stringify(ae);}catch(ac){}U[ad].callback(ab);}}};var X=function(){aa(T.wrappedJSObject[w.BROWSER_ACTION_POPUP_MESSAGE_STORE]);};var V=function(ab){++Z;U[Z]={callback:ab};return Z;};var W=function(ab){if(typeof(ab)==="undefined"){U={};return true;}if(typeof(ab)!=="number"){return false;}if(U.hasOwnProperty(ab)){delete U[ab];return true;}return false;};(function Y(){T.addEventListener(w.BROWSER_ACTION_POPUP_MESSAGE_EVENT_NAME,X,false);}());return{addListener:V,removeListener:W,__exposedProps__:{addListener:"wr",removeListener:"wr",newMessage:"wr"}};})();if(window.navigator.userAgent.indexOf("Windows")<0){F.sizeTo(C+16,x+16);}else{F.sizeTo(C+20,x+20);}var N=I.contentWindow;var M=N.wrappedJSObject;var S=new Components.utils.Sandbox(N,{sandboxPrototype:N,wantXrays:true});S.unsafeWindow=M;S.window=N;S.document=S.window.document;if(p<15){try{S.document.documentElement.mozMatchesSelector.__exposedProps__={call:"wr"};S.document.__exposedProps__={location:"wr"};S.document.location.__exposedProps__={href:"wr"};}catch(P){}}S.FFInternal=a;S.FFInternal.__exposedProps__={db:"wr",prefs:"wr",request:"wr",appID:"wr",version:"wr",platform:"wr",innerOpenURL:"wr",getTabID:"wr",internal:"wr",cr_version:"wr",background:"wr",isDebugMode:"wr",platformVersion:"wr",message:"wr",browserAction:"wr",firefox:"wr",tabs:"wr"};S.isBackground=true;S.alert=a.superAlert;S.console=q;S.ErrorMessage=MyEXT60804.ErrorMessage;S.Reports=MyEXT60804.Reports;S.UserReport=MyEXT60804.UserReport;S.__NewXPI__=true;S.__cr_messaging_handler__=K;Components.utils.evalInSandbox(y.popupScript,S,"1.8");}catch(P){}}},onProgressChange:function(M,L,K,O,P,N){},onStatusChange:function(L,K,N,M){},onSecurityChange:function(L,K,M){}};try{F.removeEventListener("popupshowing",r,false);F.removeEventListener("popuphiding",c,false);}catch(J){}r=function(L){if(L.target!=F){return;}var K=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-popup_browser");K.addProgressListener(H);K.setAttribute("src","chrome://a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804/skin/popup.html");};c=function(L){if(L.target!=F){return;}var K=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-popup_browser");K.removeProgressListener(H);K.setAttribute("src","");};F.addEventListener("popupshowing",r,false);F.addEventListener("popuphiding",c,false);});};var i=function(){var z=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-button-1");z.setAttribute("type","");var x=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-popup_panel");z.removeChild(x);var y=document.createElement("panel");y.setAttribute("id","a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-popup_panel");var A=document.createElement("browser");A.setAttribute("id","a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-popup_browser");x.appendChild(A);z.appendChild(x);};var n=function(){var x=document.getElementById("a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804-popup_panel");x.hidePopup();};return{setIcon:b,removeIcon:t,setTitle:j,setBadgeText:m,setBadgeBackgroundColor:u,onClick:f,removeBadge:d,setPopupHTML:o,clearPopup:i,closePopup:n,__exposedProps__:{setIcon:"wr",removeIcon:"wr",setTitle:"wr",setBadgeText:"wr",setBadgeBackgroundColor:"wr",onClick:"wr",removeBadge:"wr",setPopupHTML:"wr",clearPopup:"wr",closePopup:"wr",setResourceIcon:"wr",setPopup:"wr"}};};
