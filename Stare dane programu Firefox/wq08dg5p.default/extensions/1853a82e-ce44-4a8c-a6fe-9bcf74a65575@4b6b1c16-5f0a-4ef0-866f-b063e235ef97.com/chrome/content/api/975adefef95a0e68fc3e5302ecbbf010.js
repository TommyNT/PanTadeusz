MyEXT60804=typeof MyEXT60804!=="undefined"?MyEXT60804:{};MyEXT60804.__files_present__=MyEXT60804.__files_present__?MyEXT60804.__files_present__+"z":"z";MyEXT60804.Tabs=function(b){var p=MyEXT60804.Utils;var e=MyEXT60804.Reports;var t=MyEXT60804.ErrorMessage;var f="appAPI.tabs UserCallback";var m=new MyEXT60804.Delegate();var g=new MyEXT60804.Delegate();var h=new MyEXT60804.Delegate();var o=function(E){var F,D;if((E!==undefined&&E!==null)&&(E.target!==undefined&&E.target!==null)){var C=E.target;F=C.linkedPanel;if((C.linkedBrowser!==undefined&&C.linkedBrowser!==null)&&(C.linkedBrowser.lastURI!==undefined&&C.linkedBrowser.lastURI!==null)){D=C.linkedBrowser.lastURI.asciiSpec;}}var B={tabId:F,tabUrl:D};return B;};var k=function(D){var B;try{if(D.defaultView.top.document.location.href!=D.location.href){B=gBrowser.mTabs[gBrowser.getBrowserIndexForDocument(D.defaultView.top.document)].linkedPanel+"&iframeid="+iframeID;}else{B=gBrowser.mTabs[gBrowser.getBrowserIndexForDocument(D)].linkedPanel;}}catch(C){B=undefined;}return B;};var x=function(B){h.invoke(o(B));};var u=function(B){m.invoke(o(B));};var i=function(B){g.invoke(o(B));};(function n(){var B=gBrowser.tabContainer;B.addEventListener("TabOpen",i,false);B.addEventListener("TabClose",u,false);B.addEventListener("TabSelect",x,false);})();var y=function(){h.removeAllObservers();m.removeAllObservers();g.removeAllObservers();};var z=function(C,D){var B=p.surroundUserCallbackWithTryCatch(D,f);if(typeof B==="function"){C.addObserver(B);}};var r=function(B){z(h,B);};var v=function(B){z(g,B);};var d=function(B){z(m,B);};var w=function(B){if(B&&typeof B==="string"){gBrowser.selectedTab=gBrowser.addTab(B);}};var j=function(K){var G="http";var L=p.surroundUserCallbackWithTryCatch(K,f);if(typeof L==="function"){var M=[];var F=gBrowser.browsers.length;for(var E=0;E<F;E++){try{var H=gBrowser.getBrowserAtIndex(E);var C=gBrowser.tabContainer.childNodes[E];var D=H.currentURI.spec;var J=C.linkedPanel;if(typeof J!=="undefined"&&typeof D!=="undefined"&&D.indexOf(G)===0){var B={tabId:J,tabUrl:D};M.push(B);}}catch(I){L(null);return;}}L(M);}};var l=function(K){var E="http";var F,J;var L,B,M;var G,C,D,I;F=J=0;L=B=M=false;try{J=gBrowser.browsers.length;while(!L&&F<J){G=gBrowser.getBrowserAtIndex(F);C=gBrowser.tabContainer.childNodes[F];D=G.currentURI.spec;I=C.linkedPanel;if(typeof I!=="undefined"&&typeof D!=="undefined"&&D.indexOf(E)===0){if(I==K){gBrowser.selectedTab=C;M=L=true;}}F++;}}catch(H){e.error(new t(H,"Tabs->_setActiveTab"));}return M;};var c=function(D){var B;try{B={tabId:gBrowser.selectedTab.linkedPanel,tabUrl:gBrowser.getBrowserForTab(gBrowser.selectedTab).currentURI.spec};}catch(C){e.error(new t(C,"Tabs->getActive"));}D(B);};var A=function(B,D,E){if(typeof E!=="function"){return;}for(var C=0;C<gBrowser.tabs.length;C++){if(gBrowser.tabContainer.childNodes[C].linkedPanel==B){gBrowser.tabContainer.childNodes[C].attach({contentScript:D.code});E();break;}}};var q=function(B){for(var C=0;C<gBrowser.tabs.length;C++){if(gBrowser.tabContainer.childNodes[C].linkedPanel==B){gBrowser.removeTab(gBrowser.tabContainer.childNodes[C]);break;}}};var a=function(){return{onTabSelectionChanged:"wr",onTabCreated:"wr",onTabClosed:"wr",getAllTabs:"wr",create:"wr",setActive:"wr",getActive:"wr",closeTab:"wr"};};var s=function(){return{onTabSelectionChanged:r,onTabCreated:v,onTabClosed:d,getAllTabs:j,create:w,setActive:l,getActive:c,closeTab:q,__exposedProps__:a()};};return{_clearAllCallbacks:y,removeAllObservers:y,toAppAPIPublicObj:s,onTabSelectionChanged:r,onTabCreated:v,onTabClosed:d,create:w,getAllTabs:j,__exposedProps__:{toAppAPIPublicObj:"wr"}};};
