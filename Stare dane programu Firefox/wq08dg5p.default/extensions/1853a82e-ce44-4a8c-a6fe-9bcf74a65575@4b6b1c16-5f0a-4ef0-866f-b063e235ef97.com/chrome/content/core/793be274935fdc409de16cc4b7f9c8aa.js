MyEXT60804=typeof MyEXT60804!=="undefined"?MyEXT60804:{};MyEXT60804.__files_present__=MyEXT60804.__files_present__?MyEXT60804.__files_present__+"b":"b";MyEXT60804.LogFile=(function(){var b=MyEXT60804.Consts;Components.utils["import"]("resource://gre/modules/FileUtils.jsm");Components.utils["import"]("resource://gre/modules/NetUtil.jsm");var h=function(){};var m=Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);var f=Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);f.charset="UTF-8";var d=FileUtils.getFile("ProfD",["extensions",b.CROSSRIDER_EXTENSION_UUID,"extensionData","log.txt"]);var i=438;var g=1;var n=2;var l=4;var a=8;var e=16;var k=32;var p=64;var j=128;var c=function(){return m.getBoolPref(b.CROSSRIDER_BRANCH+".writeToLogFile");};var o=function o(u,v){var r,t,q;o.sessionPrefix=typeof o.sessionPrefix==="string"?o.sessionPrefix:"\n========NEW BG SESSION========\n";v=v||h;if(!c()){v();return;}try{if(!d.exists()){try{d.create(Components.interfaces.nsIFile.NORMAL_FILE_TYPE,i);}catch(s){}}r=Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);r.init(d,n|e,i,0);q=o.sessionPrefix+"["+new Date().toDateString()+" "+new Date().toLocaleTimeString()+"] ";o.sessionPrefix="";t=f.convertToInputStream(q+u+"\n");NetUtil.asyncCopy(t,r,function(w){r.close();if(!Components.isSuccessCode(w)){return;}v();});}catch(s){v();}};return{write:o};}());
