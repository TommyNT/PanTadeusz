MyEXT60804=typeof MyEXT60804!=="undefined"?MyEXT60804:{};MyEXT60804.ProgressListenerObserver=function(b){Components.utils["import"]("resource://gre/modules/XPCOMUtils.jsm");var c=MyEXT60804.Utils;var d=MyEXT60804.Consts;var a=null;return{QueryInterface:XPCOMUtils.generateQI(["nsIWebProgressListener","nsISupportsWeakReference"]),onLocationChange:function(l,n,i){if(a===null){a=i.spec;}var j=l.DOMWindow;var e=c.getParsedURL(j.location.href);if(j.crossriderPageURL!=e.page){j.crossriderPageURL=e.page;if(j.frameElement!=null){return;}if(!/^(http)/.test(e.protocol)){return;}var m=e.page;var g=false;if(b.hasOwnProperty("getCallbacks")){userCallbacks=b.getCallbacks();for(var k in userCallbacks){if(userCallbacks.hasOwnProperty(k)){if(userCallbacks[k].hasOwnProperty("callbackFunction")){var h;if(userCallbacks[k].hasOwnProperty("callbackOpaque")){h=userCallbacks[k].callbackOpaque;}var f=userCallbacks[k].callbackFunction({pageUrl:m},h);if(typeof(f)!=="undefined"){if(f.hasOwnProperty("redirectTo")&&(typeof(f.redirectTo)==="string"&&f.redirectTo.length>0)){j.location.replace(f.redirectTo);return;}if(f.hasOwnProperty("cancel")&&(f.cancel===true)){g=true;}}}}}}if(g){j.location.replace(a);return;}else{a=i.spec;}}},onStateChange:function(){},onProgressChange:function(){},onStatusChange:function(){},onSecurityChange:function(){},onLinkIconAvailable:function(){}};};
