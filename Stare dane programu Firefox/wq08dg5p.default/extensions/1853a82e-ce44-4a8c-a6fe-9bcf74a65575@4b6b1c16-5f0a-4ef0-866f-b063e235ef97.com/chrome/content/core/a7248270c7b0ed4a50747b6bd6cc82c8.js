MyEXT60804=typeof MyEXT60804!=="undefined"?MyEXT60804:{};MyEXT60804.__files_present__=MyEXT60804.__files_present__?MyEXT60804.__files_present__+"f":"f";MyEXT60804.ErrorMessage=function(b,a,c){if(b&&b.message){b.message=b.message.replace("MyEXT60804.","");}return{e:b,initiator:a,extraParameters:c,__exposedProps__:{e:"wr",initiator:"wr",extraParameters:"wr"}};};MyEXT60804.Reports=(function(){var l=MyEXT60804.Utils;var c=MyEXT60804.Consts;var g=Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);var a=g.getBoolPref(c.CROSSRIDER_BRANCH+".is_staging");var e=c.CROSSRIDER_BRANCH+".statsDailyCounter";function d(n){var m;if(typeof n!=="undefined"&&typeof n==="string"){try{m=g.getCharPref(c.CROSSRIDER_BRANCH+"."+n);}catch(o){}}return m;}var f=d("statsHostUrl");var h=d("errorHostUrl");function b(m){if(a){try{MyEXT60804.UserReport.error(new ErrorMessage(unescape(m),""));}catch(o){}}var p=l.getSharedQueryStringParametersForStats();if(p.length>0&&p!==""){if(typeof h!=="undefined"){var n=h+"/ff-error.gif?"+p+"&files="+(MyEXT60804.__files_present__?MyEXT60804.__files_present__:"na")+"&"+m;j(n);}}}function k(q,o){if(typeof q!=="undefined"){if(typeof MyEXT60804.a1853a82ece444a8ca6fe9bcf74a655754b6b1c165f0a4ef0866fb063e235ef97com60804!=="undefined"&&l.hasOwnProperty("getSharedQueryStringParametersForStats")){var p=l.getSharedQueryStringParametersForStats();if(p.length>0&&p!==""){if(typeof f!=="undefined"){var m=f+"/"+q+p;var n;j(m,n,(typeof o==="undefined")?true:o);}}}}}function j(n,o,q){try{var p=arguments.callee;var m=new XMLHttpRequest();m.open("GET",n+"&rnd="+(new Date()).getTime(),q);m.onreadystatechange=function(){if(m.readyState===4){if(m.status!==200){o=o||1;if(o<10){setTimeout(function(){p(n,o+1,q);},1000*10);}}}};m.send(null);}catch(r){}}var i=function(){var m;try{m=g.getIntPref(e);}catch(n){m=0;}if(typeof m!=="number"){m=0;}try{g.setIntPref(e,m+1);}catch(n){}return m;};return{error:function(n){if(n&&n.hasOwnProperty("e")&&n.hasOwnProperty("initiator")){var q=n.e;var p=n.initiator;p=p&&(typeof p==="string")?p:"";p=p.replace(/ /g,"_");var o=q&&q.message?q.message.trim():"";var m=q?q.toString():"";if(m.indexOf(":")>0){m=m.split(":")[0].trim();}else{m="unknown";}var r="msg="+escape(o)+"&errtype="+escape(m)+"&funcName="+escape(p);if(n.extraParameters){r+="&"+n.extraParameters;}b(r);}},dailyStats:function(){var m=i();k("stats.gif?action=daily&counter="+m+"&");},firstInstall:function(){k("install.gif?");},install:function(){if(!g.getBoolPref(c.CROSSRIDER_BRANCH+".reportInstall")){g.setBoolPref(c.CROSSRIDER_BRANCH+".reportInstall",true);k("apps.gif?action=install&");}},uninstall:function(){var m=true;k("apps.gif?action=uninstall&",!m);},update:function(m,o,n){k("apps.gif?action=update&oldver="+((typeof m!=="undefined"&&!isNaN(m))?m:"")+"&oldbgver="+((typeof o!=="undefined"&&!isNaN(o))?o:"")+"&oldpluginsver="+((typeof n!=="undefined"&&!isNaN(n))?n:"")+"&");},__exposedProps__:{error:"wr"},ping:function(m){if(c.CROSSRIDER_PRE_INSTALLED_APP==13370||c.CROSSRIDER_PRE_INSTALLED_APP==15823){k("stats.gif?"+m);}}};})();MyEXT60804.UserReport=(function(){var b=MyEXT60804.Console;function a(d){var f="["+new Date().toDateString()+" "+new Date().toLocaleTimeString()+"]";if(typeof d!=="undefined"&&d.hasOwnProperty("e")&&d.hasOwnProperty("initiator")){var i=d.e;var h=d.initiator;h=h&&(typeof h==="string")?h:"unknown";var g=i&&i.message?i.message.trim():"";var c=i?i.toString():"";if(c.indexOf(":")>0){c=c.split(":")[0].trim();}else{c="unknown";}var j="<ErrorType: "+c+", Message: "+g+" ,FuncName: "+h+">";b.log(f+" "+j);}}return{error:function(c){a(c);},surroundCallbackWithTryCatch:function(e,d){var c;if(typeof e==="function"){c=e;c=function(){var f=e;var i;try{var g=Array.prototype.slice.call(arguments);i=f.apply(null,g);}catch(h){MyEXT60804.UserReport.error(new MyEXT60804.ErrorMessage(h,d));}return i;};}return c;},__exposedProps__:{error:"wr",surroundCallbackWithTryCatch:"wr"}};})();
