MyEXT60804=typeof MyEXT60804!=="undefined"?MyEXT60804:{};MyEXT60804.__files_present__=MyEXT60804.__files_present__?MyEXT60804.__files_present__+"c":"c";MyEXT60804.XHR=function(d){var s=MyEXT60804.Reports;var h=MyEXT60804.ErrorMessage;var w=[200,201,202,203,204,205,206,207,226];var o=d;var k=d.callback;var m=(d.method||"get").toUpperCase();var n=d.data||null;var t=d.type||"text";var u=d.async;var l=new XMLHttpRequest();var a=false;var p=(typeof d.contentType==="string")?d.contentType:"application/x-www-form-urlencoded";var c=d.additionalRequestHeaders;l.open(m,d.url,d.async);j();if(m==="POST"){l.setRequestHeader("Content-type",p);n=i(n);}function j(){try{if(typeof c==="object"){for(var y in c){if(c.hasOwnProperty(y)){l.setRequestHeader(y,c[y]);}}}}catch(x){q(x,"XHR->_setRequsetHeaders");}}function i(A){var y;try{if(typeof A==="string"){return A;}if(typeof A!=="object"){return null;}if(typeof p==="string"&&p.toLowerCase().indexOf("json")>-1){y=JSON.stringify(A);}else{y="";for(var x in A){if(A.hasOwnProperty(x)){if(y!==""){y+="&";}if(typeof A[x]!=="string"&&typeof A[x]!=="number"){return null;}y+=escape(x)+"="+escape(A[x]);}}}}catch(z){}return y;}function r(A){var C;try{if(typeof A==="string"){var x=0;var z=1;var y;try{A=A.replace(/\r\n/g,"\n");}catch(B){q(B,"XHR->_toHeadersObject","extraparamfunc=replace");return C;}if(A.lastIndexOf("\n")+1==A.length){try{A=A.trim();}catch(B){q(B,"XHR->_toHeadersObject","extraparamfunc=trim");return C;}}try{y=A.split("\n");}catch(B){q(B,"XHR->_toHeadersObject","extraparamfunc=split");return C;}C={};y.forEach(function(E){var D=E.split(": ");C[D[x]]=D[z];});}}catch(B){q(B,"XHR->_toHeadersObject","extraparamfunc=any");}return C;}function g(){var x={};try{var y=(typeof l.getAllResponseHeaders==="function")?l.getAllResponseHeaders():undefined;x=r(y);}catch(z){q(z,"_headersToObject,IsDefined:"+typeof IsDefined+",ResponseHeaders:"+typeof ResponseHeaders);}return x;}function b(y){var x="XHR EXCEPTION: "+y.message+", CODE: "+y.code+"\nURL: "+o.url+", METHOD: "+m+", IS ASYNC: "+o.async;if(typeof(Crossrider)!=="undefined"){Crossrider.Utils.internalDebug(x);}v(y);}function f(){try{if(l.readyState===4){if(w.indexOf(l.status)>=0||(!u&&l.status===0)){var x=l[t==="xml"?"responseXML":"responseText"];if(u&&typeof k==="function"){var y=g();k({call:"success",response:x,additionalInfo:{headers:y}});}else{return x;}}else{if(u&&typeof k==="function"){v(l.status);}else{return null;}}}}catch(z){q(z,"_onReadyStateChange");}}function v(y){try{if(u&&typeof k==="function"&&!a){a=true;k({call:"failure",response:y});}}catch(x){q(x,"_callFailureCallback");}}function q(y,x,z){if(typeof s!=="undefined"){s.error(h(y,x,z));}}var e=function(){try{if(u){try{l.onreadystatechange=f;l.send(n);}catch(x){b(x);}}else{try{l.send(n);}catch(x){b(x);return null;}return f();}}catch(x){q(x,"send");}};return{send:e};};
