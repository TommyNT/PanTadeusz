MyEXT60804=typeof MyEXT60804!=="undefined"?MyEXT60804:{};MyEXT60804.HTTPObserver=function(a){var i=0;var h=1;function c(l){var k;try{k=l.QueryInterface(Components.interfaces.nsIChannel).notificationCallbacks.getInterface(Components.interfaces.nsILoadContext);}catch(j){try{k=l.loadGroup.notificationCallbacks.getInterface(Components.interfaces.nsILoadContext);}catch(j){k=null;}}return k;}function b(n,k,m){var l="http";var j=undefined;if(n.top.location!==n.location){j=n.location;return j;}}function e(k){var j;if(k&&k.top&&k.top.location){if(f(k.top.location.href)&&k.top.location.href.indexOf(document.getElementById("urlbar").value)>=0){j=k.top.location.href;}}return j;}function d(j){if(j instanceof Components.interfaces.nsIRequest){try{if(j.notificationCallbacks){return j.notificationCallbacks.getInterface(Components.interfaces.nsILoadContext).associatedWindow;}}catch(k){}try{if(j.loadGroup&&j.loadGroup.notificationCallbacks){return j.loadGroup.notificationCallbacks.getInterface(Components.interfaces.nsILoadContext).associatedWindow;}}catch(k){}}return null;}function f(k){var j="http";return k.indexOf(j)==0;}function g(l){if(typeof l=="undefined"||typeof l.location=="undefined"||typeof l.location.href=="undefined"){return false;}var j="chrome://browser/content/browser.xul";var k=l.location.href;return !f(k)&&k.indexOf(j)>=0;}return{observe:function(x,j,n){if(a.hasOwnProperty("isEmpty")&&a.isEmpty()){return;}if(j=="http-on-modify-request"){var u=x.QueryInterface(Components.interfaces.nsIHttpChannel);var s=d(u);if(s==null||g(s)){return;}var m=e(s);var y=(s.location.href!==s.top.location.href&&f(s.location.href))?s.location.href:"undefined";var v=u.URI.asciiSpec;var p=u.requestMethod;try{var r=(u.getRequestHeader("Accept").indexOf("text/html")>=0)?i:h;}catch(t){r=undefined;}if(typeof m=="undefined"){if(typeof r!=="undefined"&&r==i){m=v;}else{m=undefined;}}var l=false;if(a.hasOwnProperty("getCallbacks")){var w=a.getCallbacks();for(var q in w){if(w.hasOwnProperty(q)){if(w[q].hasOwnProperty("callbackFunction")){var o=undefined;if(w[q].hasOwnProperty("callbackOpaque")){o=w[q].callbackOpaque;}var k=w[q].callbackFunction({requestUrl:v,pageUrl:m,method:p,iframeUrl:y},o);if(typeof(k)!=="undefined"){if(k.hasOwnProperty("redirectTo")&&(typeof(k.redirectTo)==="string"&&k.redirectTo.length>0)){u.cancel(Components.results.NS_BINDING_ABORTED);loadContext.associatedWindow.location.href=k.redirectTo;return;}if(k.hasOwnProperty("cancel")&&(k.cancel===true)){l=true;}}}}}}if(l){u.cancel(Components.results.NS_BINDING_ABORTED);return;}}}};};
